/** BdLiteWeapons are extensions to the standard Doom weapon that allow for reloading and other special features (the global kick and grenade attacks). Weapons for BdLite should provide the following labels:

Spawn: Sprite sitting in the game world
Ready: Perform any animation/setup for unholstering the weapon, then fall through to ReadyLoop.
ReadyLoop: Display weapon sprite with A_ReadyWeapon. Loops back on to itself
Deselect: Perform animation for lowering the weapon, ending in Wait
Fire:
    Check that the weapon has at least one shot in it. If not, go to Reload (or just NoAmmo if reload is unnecessary for this weapon)
    Perform animation and firing, take the relevant ammunition manually.
    Return to ReadyLoop.
Reload:
    Check the weapon's loaded ammo using 0 (which means to check against the maximum capacity of that item). If it's already full, return to ReadyLoop
    If the player has at least one ammo in reserve, jump to ReloadAnimate.
    Otherwise, perform actions for no more ammo to reload.
ReloadAnimate:
    Perform animation for reload then fall through to ReloadAmmo.
ReloadAmmo:
    Loop, transferring ammo count from reserve to weapon, until the reserve is exhausted or the weapon is at capacity (use a check against 0, max capacity)
*/
//dont care enough to change the above desc to fit the mod you get the point
//sorry in advance for being passive aggressive im just on my period rn
ACTOR Postal3dWeapon : Weapon
{
    Weapon.AmmoUse1 0
    Weapon.AmmoUse2 0
    Weapon.AmmoGive1 0
    Weapon.AmmoGive2 0
    +FORCEXYBILLBOARD
    Weapon.BobStyle Inverse
    Weapon.BobSpeed 2.5
	Weapon.BobRangeX 0.6
	Weapon.BobRangeY 0.3
	Inventory.PickupSound "weapons/pickup"
	States
	{
    Ready:
    Deselect:
    Fire:
    Spawn:
        TNT1 A 0 A_Print("??? Weapon reached unimplemented state ???")
        Stop
    Select:
		TNT1 A 1 A_Raise
        TNT1 AA 0 A_Raise
        Wait
		
	Zoom:
		TNT1 A 0 A_JumpIfInventory("ExecuteDownedEnemy", 1, "DoExecution")
		TNT1 A 0 A_PlaySound("weapons/melee/kick")
		TNT1 A 0 SetPlayerProperty(0, 1, PROP_FROZEN)
		//If the player has been punching, end the combo here
		TNT1 A 0 A_TakeInventory("PSeq1", 2)
		TNT1 A 0 A_TakeInventory("PSeq2", 1)
		TNT1 A 0 A_GunFlash("KickFlash")
		KICK A 3
		TNT1 A 0 A_FireCustomMissile("KickAttack", 0, 0, 0, -7)
		//13 tics in total
		//KICK BBBBBB 1 A_WeaponOffset(Random(-2, 2), Random(35, 40), WOF_Interpolate)
		KICK BBB 2 A_WeaponOffset(Random(-2, 2), Random(35, 40), WOF_Interpolate)
		KICK CD 3
		TNT1 A 1
		TNT1 A 0 SetPlayerProperty(0,0, PROP_FROZEN)
		TNT1 A 0 A_JumpIfInventory("ExecuteDownedEnemy", 1, "DoExecution")
		//TNT1 A 0 A_Takeinventory("Kicking",1)
		TNT1 A 0 A_Jump(256, "Ready")
		
	//UseAttack:
	Kick: //like this atm so i dont have to change too much
		TNT1 A 0
		TNT1 A 0 A_TakeInventory("PressedUse", 100)
		TNT1 A 0 A_FireCustomMissile("PRLD_UseAttack", 0, 0, 0, 0, 0, 0)
		TNT1 A 0 A_Takeinventory("Kicking",1)
		TNT1 A 0 A_Jump(256, "Ready")
		
		
		
	/*DoExecution:
		TNT1 A 0 A_GunFlash("ExecuteFlash")
		TNT1 A 0 A_PlaySound("weapons/execution",CHAN_AUTO)
		TNT1 A 0 A_SetPitch(65)
		TNT1 A 0 A_JumpIfInventory("ExecuteDownedSheriff1", 1, "Sherrif1")
		
	Sheriff1:
		SHE1 A 51
		TNT1 A 0 A_JumpIfInventory("M12ExecShotToken", 1, "Sheriff1_M12")
	Sheriff1_M12:
		SHE1 BC 6 A_WeaponOffset(Random(-2, 2), Random(35, 40), WOF_Interpolate)
		SHE1 D 5 A_WeaponOffset(Random(-2, 2), Random(35, 40), WOF_Interpolate)
		SHE1 D 1
		Goto ExecutionFinishM12
	ExecutionFinish:
		TNT1 A 0 A_SetPitch(-65)
		DBRL A 1
		Goto Ready*/
		
	DoExecution:
		//unedited atm, edit later
		TNT1 A 0 A_PlaySound("weapons/execution",CHAN_AUTO)
		TNT1 A 0 A_SetPitch(65)
		SMGR A 1
		TNT1 A 0 A_ChangeFLag("NOPAIN", 1)
		TNT1 A 0 A_ChangeFLag("PUSHABLE", 0)
		TNT1 A 0 A_Stop
		TNT1 A 0 SetPlayerProperty(0,1,4)
		TNT1 A 0 A_ChangeFlag("NOGRAVITY", 1)
		TNT1 A 0 A_ChangeFlag("INVULNERABLE", 1)
		KICK A 0 A_Takeinventory("Kicking",1)
		KICK A 0 A_Takeinventory("ExecuteDownedEnemy",1)
		
		SMGR AAAAA 1 //A_SetPitch(70)
		TNT1 A 0 A_Jump (226,2)
		TNT1 A 0 A_PlaySound("demon/lines/execution", CHAN_AUTO)
		//SMGR A 45
		SMGR A 15
		SMGR B 15
		SMGR I 15
        TNT1 A 0 A_Jump(256, "Execution")
		//unedited atm, edit later
		
	Execution:
		TNT1 A 0 A_JumpIfInventory ("M12ExecShotToken",3,"EFireFinish2")
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("SMG/Single",CHAN_AUTO)
		TNT1 A 0 A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0)
		TNT1 A 0 A_FireProjectile("SmokeSpawner",0,0,6,2)
		TNT1 A 0 A_FireCustomMissile ("9MMCasingSpawner",0,0,15,1)
		//TNT1 A 0 A_Jump (256,"MF1","MF2","MF3","MF4","MF5")
		TNT1 A 0 A_Jump (256,"EMF2","EMF3","EMF4","EMF5")
	EMF2:
		SMGR C 2 BRIGHT
		Goto EFireFinish
	EMF3:
		SMGR D 2 BRIGHT
		Goto EFireFinish
	EMF4:
		SMGR E 2 BRIGHT
		Goto EFireFinish
	EMF5:
		SMGR F 2 BRIGHT
		Goto EFireFinish
	EFireFinish:
		SMGR G 1
		SMGR H 1
		SMGR I 1
		SMGR I 2
		TNT1 A 0 A_GiveInventory("M12ExecShotToken",1)
		Goto Execution
	EFireFinish2:
		TNT1 A 0 A_TakeInventory("M12ExecShotToken",3)
		SMGR AAAAAAAA 1 A_SetPitch(Pitch-10)
		TNT1 A 0 A_ChangeFLag("NOPAIN", 0)
		TNT1 A 0 A_ChangeFLag("PUSHABLE", 1)
		TNT1 A 0 SetPlayerProperty(0,0,4)
		TNT1 A 0 A_ChangeFlag("NOGRAVITY", 0)
		TNT1 A 0 A_ChangeFlag("INVULNERABLE", 0)
		KICK A 0 A_Takeinventory("ExecuteDownedEnemy",1)
        TNT1 A 0 A_Jump(256, "Ready")
	}
}