ACTOR PRLD_ExplosiveBarrel : ExplosiveBarrel REPLACES ExplosiveBarrel
{
	  Radius 10
  Height 34
    damagefactor "Kick", 0.1
    damagefactor "Melee", 0.1
	PainChance "Kick", 256
	Scale 0.5
	Obituary "%o ended the spree early, accidently?"
	+STRIFEDAMAGE
	States
	{
	Spawn:
		BRLS A 6
		Loop
	Death:
		TNT1 A 0
		TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_Jump(256, "DeathNormal", "DeathPostal")
	DeathNormal:
		BRLS A 3 BRIGHT
		TNT1 A 0 A_Explode(160,200,XF_HURTSOURCE,true,0,0,0,0,"Fire")
        TNT1 A 0 Radius_Quake (6, 54, 0, 15, 0)
		TNT1 AAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PRLD_BarrelFire", random (0, 120), random (0, 120), 0, 0, 0, 0, random (0, 360)) 
		//BRLS B -1
		Stop
	DeathPostal:
		BRLS A 3 BRIGHT
		TNT1 A 0 A_Explode(160,200)
		TNT1 A 0 A_SpawnItem("PrldExplosion")
        TNT1 A 0 Radius_Quake (6, 54, 0, 15, 0)
		TNT1 A 0 A_CustomMissile ("PRLD_FlyingBarrel", 35, 0, 360, CMF_AIMDIRECTION, 90)
		Stop
	}
}
Actor PRLD_FlyingBarrel
{
	Radius 10
	Height 34
	Projectile
	Speed 20
    Gravity 0.7
	Scale 0.5
    -NOGRAVITY
    -BLOODSPLATTER
	+EXTREMEDEATH
	-EXPLODEONWATER
	+SKYEXPLODE
	+ROLLSPRITE
	+ROLLCENTER
	-BOUNCEONFLOORS
	-BOUNCEONWALLS
	-BOUNCEONCEILINGS
	+SLIDESONWALLS
	-NOTELEPORT
	BounceFactor 0.5
	WallBounceFactor 0.25
    Health 5
	+STRIFEDAMAGE
	States
	{
	Spawn:
		BRLS BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB 1 {
		A_SetRoll(roll - 10, SPF_INTERPOLATE);
		}
		Loop
	Death:
	XDeath:
	Explode:
		TNT1 A 0
		TNT1 A 0 A_NoBlocking
		//TNT1 A 0 A_Explode(100,150)
		//TNT1 A 0 A_SpawnItem("PrldExplosion")
		TNT1 AAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PRLD_BarrelFire", random (0, 120), random (0, 120), 0, 0, 0, 0, random (0, 360)) 
        TNT1 A 0 Radius_Quake (6, 54, 0, 15, 0)
		TNT1 A -1
		Stop
	}
}
/*Actor PRLD_BarrelFire
{
  Radius 8
  Height 40
  Projectile
  RenderStyle Add
  DamageType Fire
  Alpha 0.90
  -NoGravity
  +LowGravity
  +NoExplodeFloor
  +NoDamageThrust
  +Thruactors
  +ThruGhost
  States
  {
  Spawn:
	FLME A 1 BRIGHT A_SetScale(0.3)
	FLME A 1 BRIGHT A_SetScale(0.4)
	FLME B 1 BRIGHT A_SetScale(0.5)
	FLME B 1 BRIGHT A_SetScale(0.6)
	FLME C 1 BRIGHT A_SetScale(0.7)
	FLME C 1 BRIGHT A_SetScale(0.8)
	FLME D 1 BRIGHT A_SetScale(0.9)
	FLME D 1 BRIGHT A_SetScale(1.0)
    FRFX JJ 0 A_SpawnItemEx("PRLD_BarrelFire2", Random(-30, 30), Random(-20, 20), Random(10, -10), 0, 0, 0, 0, 128)
    FLME EFGHIJKLMN 2 BRIGHT A_Explode(5, 16, 0)
  FlameLoop:
    FLME ABCDEFGHIJKLMN 2 Bright A_Explode(5, 16, 0)
    FLME ABCDEFGHIJKLMN 2 Bright A_Explode(5, 16, 0)
    FLME ABCDEFGHIJKLMN 2 Bright A_Explode(5, 16, 0)
    FLME ABCDEFGHIJKLMN 2 Bright A_Explode(5, 16, 0)
    FLME ABCDEFGHIJKLMN 2 Bright A_Explode(5, 16, 0)
    FLME A 0 A_Jump(150, 1)
	Loop
    TNT1 A 0
  Death:
    FLME ABCDEFGHIJ 2 BRIGHT
	FLME K 1 BRIGHT A_SetScale(0.8)
	FLME K 1 BRIGHT A_FadeOut(0.2)
	FLME L 1 BRIGHT A_SetScale(0.4)
	FLME L 1  A_FadeOut(0.3)
	FLME M 1  A_SetScale(0.2)
	FLME M 1  A_FadeOut(0.4)
	FLME N 1  A_SetScale(0.1)
	FLME N 1  A_FadeOut(0.5)
    Stop
  }
}
actor PRLD_BarrelFire2 : PRLD_BarrelFire //decorative variant
{
  Scale 0.5
  States
  {
  Spawn:
	FLME A 1 BRIGHT A_SetScale(0.3)
	FLME A 1 BRIGHT A_SetScale(0.4)
	FLME B 2 BRIGHT A_SetScale(0.5)
    FLME CEFGHIJKLMN 2 BRIGHT
  FlameLoop:
    FLME ABCDEFGHIJKLMN 2 Bright 
    FLME ABCDEFGHIJKLMN 2 Bright
    FLME ABCDEFGHIJKLMN 2 Bright
    FLME ABCDEFGHIJKLMN 2 Bright
    FLME ABCDEFGHIJKLMN 2 Bright
    FLME A 0 A_Jump(150, 1)
	Loop
    TNT1 A 0
  Death:
    FLME ABCDEFGHIJK 2 BRIGHT
	FLME L 1 BRIGHT A_SetScale(0.4)
	FLME L 1  A_FadeOut(0.3)
	FLME M 1  A_SetScale(0.2)
	FLME M 1  A_FadeOut(0.4)
	FLME N 1  A_SetScale(0.1)
	FLME N 1  A_FadeOut(0.5)
    Stop
  }
}*/

Actor Firetype
{
    Projectile
	+MISSILE
    +NOBLOCKMAP
    +NOTELEPORT
    +DONTSPLASH
	+FORCEXYBILLBOARD
	+THRUACTORS
	+NOBLOOD
	+NOBLOODDECALS
	+BLOODLESSIMPACT
	+NODAMAGETHRUST
	-NOGRAVITY
	-BLOODSPLATTER
	-RIPPER
}	


Actor PRLD_BarrelFire : Firetype
{
  Radius 20
  Height 20
  Speed 2
  Gravity 6
  Projectile
  RenderStyle Add
  Alpha 0.67
  Scale 1.2
  -SOLID
  +MISSILE
  +NOBLOCKMAP
  +NOCLIP
  States
  {
	Spawn:
		TNT1 A 0 A_SetScale(0.4)
		FLME A 3
		TNT1 A 0 A_SetScale(0.6)
		FLME B 3
		TNT1 A 0 A_SetScale(0.8)
		FLME C 3
		TNT1 A 0 A_SetScale(1.0)
		FLME D 3
		TNT1 A 0 A_SetScale(1.2)
	FLoop:
		FLME ABCD 3
		TNT1 A 0 A_Jump(168, "Death")
		Loop
	
  Death:
    FRFX HIJ 2 bright 
    FRFX KLM 2 bright 
    FRFX NO 2 bright
    Stop
  }
}
Actor PRLD_BarrelFire2 : PRLD_BarrelFire
{
  Scale 0.6
}